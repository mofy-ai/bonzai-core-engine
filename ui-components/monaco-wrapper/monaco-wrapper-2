"use client"

import * as React from "react"
import { useState, useRef, useEffect, useCallback } from "react"
import { motion } from "framer-motion"
import { 
  Code2, 
  Save, 
  RotateCcw, 
  Play, 
  ZoomIn, 
  ZoomOut, 
  Settings, 
  Heart,
  Coffee,
  Sparkles,
  FileText,
  Download,
  Copy,
  Check
} from "lucide-react"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"

// Copy to clipboard hook
function useCopyToClipboard(): [string | null, (text: string) => Promise<boolean>] {
  const [copiedText, setCopiedText] = React.useState<string | null>(null)

  const copy: (text: string) => Promise<boolean> = React.useCallback(async (text) => {
    if (!navigator?.clipboard) {
      console.warn("Clipboard not supported")
      return false
    }

    try {
      await navigator.clipboard.writeText(text)
      setCopiedText(text)
      return true
    } catch (error) {
      console.warn("Copy failed", error)
      setCopiedText(null)
      return false
    }
  }, [])

  return [copiedText, copy]
}

// Monaco Editor Types
export type CodeLanguage = 
  | "typescript" 
  | "javascript" 
  | "html" 
  | "css" 
  | "json" 
  | "python" 
  | "java" 
  | "cpp" 
  | "csharp" 
  | "go" 
  | "rust" 
  | "php" 
  | "ruby" 
  | "sql" 
  | "markdown"

export type KeybindingMode = "standard" | "vim" | "emacs"

export interface CursorPosition {
  line: number
  column: number
}

export interface MonacoEditorProps {
  value?: string
  language?: CodeLanguage
  theme?: "purple-dark" | "purple-light"
  onChange?: (value: string) => void
  onCursorPositionChange?: (position: CursorPosition) => void
  onSave?: (content: string) => void
  onLoad?: (content: string) => void
  keybindingMode?: KeybindingMode
  fontSize?: number
  showMinimap?: boolean
  wordWrap?: boolean
  readOnly?: boolean
  className?: string
}

// Language configurations
const LANGUAGE_OPTIONS = [
  { value: "typescript", label: "TypeScript", extension: ".ts", icon: "ğŸ”·" },
  { value: "javascript", label: "JavaScript", extension: ".js", icon: "ğŸŸ¨" },
  { value: "html", label: "HTML", extension: ".html", icon: "ğŸŒ" },
  { value: "css", label: "CSS", extension: ".css", icon: "ğŸ¨" },
  { value: "json", label: "JSON", extension: ".json", icon: "ğŸ“‹" },
  { value: "python", label: "Python", extension: ".py", icon: "ğŸ" },
  { value: "java", label: "Java", extension: ".java", icon: "â˜•" },
  { value: "cpp", label: "C++", extension: ".cpp", icon: "âš¡" },
  { value: "csharp", label: "C#", extension: ".cs", icon: "ğŸ”µ" },
  { value: "go", label: "Go", extension: ".go", icon: "ğŸ¹" },
  { value: "rust", label: "Rust", extension: ".rs", icon: "ğŸ¦€" },
  { value: "php", label: "PHP", extension: ".php", icon: "ğŸ˜" },
  { value: "ruby", label: "Ruby", extension: ".rb", icon: "ğŸ’" },
  { value: "sql", label: "SQL", extension: ".sql", icon: "ğŸ—ƒï¸" },
  { value: "markdown", label: "Markdown", extension: ".md", icon: "ğŸ“" }
]

const DEFAULT_CODE_SAMPLES: Record<CodeLanguage, string> = {
  typescript: `// ğŸ’œ Welcome to your cozy TypeScript playground! 
// You're doing amazing - let's build something wonderful together! âœ¨

interface WelcomeMessage {
  greeting: string;
  encouragement: string;
  mood: "excited" | "happy" | "inspired";
}

const createWelcome = (name: string = "Developer"): WelcomeMessage => {
  return {
    greeting: \`Hello, \${name}! ğŸŒŸ\`,
    encouragement: "You've got this! Every line of code is progress! ğŸ’ª",
    mood: "inspired"
  };
};

// Your journey starts here - take it one step at a time! ğŸš€
const message = createWelcome("Amazing Coder");
console.log(message.greeting);
console.log(message.encouragement);`,

  javascript: `// ğŸŒˆ Your JavaScript adventure begins here!
// Remember: every expert was once a beginner! ğŸ’

function createMagic(dreams = []) {
  // You're capable of incredible things! âœ¨
  const magic = dreams.map(dream => ({
    dream,
    possible: true,
    timeline: "sooner than you think! ğŸ¯"
  }));
  
  return magic;
}

// Believe in yourself - you're already doing great! ğŸŒŸ
const myDreams = ["Build amazing apps", "Help others", "Never stop learning"];
const magicMoments = createMagic(myDreams);

console.log("Your dreams are valid and achievable! ğŸ’œ");
magicMoments.forEach(moment => {
  console.log(\`âœ¨ \${moment.dream} is \${moment.possible ? 'absolutely possible' : 'impossible'}\`);
});`,

  html: `<!-- ğŸ  Welcome to your HTML home! Every great website starts here! -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Amazing Creation ğŸ’œ</title>
    <style>
        /* ğŸ¨ A little purple magic for you! */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            margin: 0;
        }
        .encouragement {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="encouragement">
        <h1>ğŸŒŸ You're Building Something Beautiful!</h1>
        <p>Every line of HTML is a step toward your dreams. Keep going! ğŸ’ª</p>
        <p>Remember: Progress over perfection! ğŸ’œ</p>
    </div>
</body>
</html>`,

  css: `/* ğŸ¨ Your CSS canvas awaits! Paint your dreams in purple! */
/* Remember: every designer started with their first line of CSS! ğŸ’œ */

:root {
  /* ğŸ’œ Purple mama bear theme - warm and encouraging! */
  --purple-primary: #8B5CF6;
  --purple-light: #A78BFA;
  --purple-dark: #7C3AED;
  --glass-bg: rgba(139, 92, 246, 0.1);
  --encouragement: "You're doing amazing! âœ¨";
}

/* ğŸŒŸ Glassmorphism magic - you've got this! */
.mama-bear-container {
  background: var(--glass-bg);
  backdrop-filter: blur(16px);
  border-radius: 20px;
  border: 1px solid rgba(139, 92, 246, 0.2);
  padding: 2rem;
  box-shadow: 
    0 8px 32px rgba(139, 92, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.mama-bear-container:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 12px 40px rgba(139, 92, 246, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* ğŸ’ Encouraging text styles */
.encouragement-text {
  color: var(--purple-light);
  font-weight: 500;
  text-align: center;
  margin: 1rem 0;
}

.encouragement-text::before {
  content: "ğŸ’œ ";
}

.encouragement-text::after {
  content: " You're amazing!";
  opacity: 0.8;
}

/* ğŸš€ Keep building beautiful things! */`,

  json: `{
  "ğŸ’œ": "Welcome to your JSON playground!",
  "encouragement": {
    "message": "You're doing fantastic! Every bracket counts! ğŸŒŸ",
    "reminder": "Take breaks when you need them - you're human! ğŸ’",
    "truth": "Progress over perfection, always! âœ¨"
  },
  "mama_bear_wisdom": [
    "ğŸŒŸ Start small, dream big!",
    "ğŸ’ª Every error is a learning opportunity!",
    "ğŸ¯ You're exactly where you need to be!",
    "ğŸ’œ Your code has purpose and meaning!"
  ],
  "project_config": {
    "theme": "purple-glassmorphism",
    "mood": "encouraging",
    "energy_level": "high",
    "support_level": "maximum",
    "belief_in_you": "infinite âˆ"
  },
  "daily_affirmations": {
    "morning": "I am a capable developer! ğŸŒ…",
    "afternoon": "My code is getting better every day! â˜€ï¸",
    "evening": "I'm proud of what I accomplished today! ğŸŒ™"
  },
  "remember": "You're not just writing code - you're creating magic! âœ¨ğŸš€"
}`,

  python: `# ğŸ Python paradise! Welcome to your coding sanctuary! 
# Remember: you're braver than you believe and stronger than you seem! ğŸ’œ

import datetime
from typing import List, Dict

def mama_bear_encouragement() -> Dict[str, str]:
    """
    ğŸ’ A gentle reminder that you're doing amazing!
    Every function you write is progress! âœ¨
    """
    return {
        "message": "You're absolutely crushing it! ğŸŒŸ",
        "reminder": "Take it one line at a time - you've got this! ğŸ’ª",
        "truth": "Your code matters and so do you! ğŸ’œ"
    }

class DreamBuilder:
    """ğŸš€ Building dreams, one class at a time!"""
    
    def __init__(self, dreamer_name: str = "Amazing Developer"):
        self.dreamer = dreamer_name
        self.dreams: List[str] = []
        self.achievements: List[str] = []
        
    def add_dream(self, dream: str) -> None:
        """âœ¨ Add a dream - they're all valid and achievable!"""
        self.dreams.append(f"ğŸ’« {dream}")
        print(f"Dream added! You're one step closer! ğŸ¯")
        
    def celebrate_progress(self, achievement: str) -> None:
        """ğŸ‰ Celebrate every win, no matter how small!"""
        self.achievements.append(f"ğŸ† {achievement}")
        print(f"ğŸŠ Celebrating: {achievement}")
        print("You should be proud - progress is progress! ğŸ’œ")

# ğŸŒŸ Your journey starts here!
if __name__ == "__main__":
    builder = DreamBuilder("Wonderful You")
    builder.add_dream("Master Python")
    builder.add_dream("Build something amazing")
    builder.celebrate_progress("Opened the code editor")
    
    encouragement = mama_bear_encouragement()
    print(f"\\nğŸ’œ {encouragement['message']}")
    print(f"ğŸŒˆ {encouragement['reminder']}")`,

  java: `// â˜• Java joy! Welcome to your caffeinated coding corner!
// Remember: every expert was once a beginner! You're on the right path! ğŸ’œ

import java.util.*;
import java.time.LocalDateTime;

/**
 * ğŸŒŸ MamaBearEncouragement - Because you deserve all the support!
 * Every line of Java you write is a step toward greatness! âœ¨
 */
public class MamaBearEncouragement {
    private String developerName;
    private List<String> achievements;
    private List<String> dailyAffirmations;
    
    public MamaBearEncouragement(String name) {
        this.developerName = name != null ? name : "Amazing Developer";
        this.achievements = new ArrayList<>();
        this.dailyAffirmations = Arrays.asList(
            "ğŸ’œ I am capable of learning anything!",
            "ğŸŒŸ My code is getting better every day!",
            "ğŸš€ I embrace challenges as growth opportunities!",
            "ğŸ’ª I am persistent and resilient!"
        );
    }
    
    /**
     * ğŸ‰ Celebrate your progress - you're doing fantastic!
     */
    public void celebrateAchievement(String achievement) {
        achievements.add("ğŸ† " + achievement);
        System.out.println("ğŸŠ Celebrating: " + achievement);
        System.out.println("You should be so proud! Keep going! ğŸ’œ");
    }
    
    /**
     * âœ¨ Get your daily dose of encouragement!
     */
    public void getDailyEncouragement() {
        Random random = new Random();
        String affirmation = dailyAffirmations.get(
            random.nextInt(dailyAffirmations.size())
        );
        
        System.out.println("\\nğŸ’ Daily Reminder for " + developerName + ":");
        System.out.println(affirmation);
        System.out.println("You're exactly where you need to be! ğŸŒˆ");
    }
    
    public static void main(String[] args) {
        MamaBearEncouragement encourager = 
            new MamaBearEncouragement("Wonderful You");
            
        encourager.celebrateAchievement("Started coding in Java!");
        encourager.getDailyEncouragement();
        
        System.out.println("\\nğŸŒŸ Remember: Progress over perfection!");
        System.out.println("ğŸ’œ You're building something beautiful!");
    }
}`,

  cpp: `// âš¡ C++ power! Welcome to your high-performance haven!
// You're tackling one of the most powerful languages - you're incredible! ğŸ’œ

#include <iostream>
#include <vector>
#include <string>
#include <memory>
#include <algorithm>

/**
 * ğŸŒŸ MamaBearSupport - Because you deserve encouragement!
 * Every pointer you manage is progress! Every template you write is growth! âœ¨
 */
class MamaBearSupport {
private:
    std::string developerName;
    std::vector<std::string> achievements;
    std::vector<std::string> encouragements;
    
public:
    MamaBearSupport(const std::string& name = "Amazing Developer") 
        : developerName(name) {
        encouragements = {
            "ğŸ’œ You're mastering C++ - that's incredible!",
            "ğŸš€ Every compile error is a learning opportunity!",
            "âš¡ Your code is getting more efficient every day!",
            "ğŸŒŸ You're building the future with C++!"
        };
    }
    
    /**
     * ğŸ‰ Celebrate your C++ victories!
     */
    void celebrateProgress(const std::string& achievement) {
        achievements.emplace_back("ğŸ† " + achievement);
        std::cout << "ğŸŠ Celebrating: " << achievement << std::endl;
        std::cout << "You're doing amazing work! Keep it up! ğŸ’œ" << std::endl;
    }
    
    /**
     * âœ¨ Get some mama bear encouragement!
     */
    void getEncouragement() const {
        auto randomEncouragement = encouragements[
            rand() % encouragements.size()
        ];
        
        std::cout << "\\nğŸ’ For " << developerName << ":" << std::endl;
        std::cout << randomEncouragement << std::endl;
        std::cout << "You're exactly where you need to be! ğŸŒˆ" << std::endl;
    }
    
    /**
     * ğŸ“Š Show your amazing progress!
     */
    void showAchievements() const {
        std::cout << "\\nğŸŒŸ Your C++ Journey:" << std::endl;
        std::for_each(achievements.begin(), achievements.end(),
            [](const std::string& achievement) {
                std::cout << achievement << std::endl;
            });
    }
};

int main() {
    auto support = std::make_unique<MamaBearSupport>("Wonderful You");
    
    support->celebrateProgress("Opened C++ editor!");
    support->celebrateProgress("Understanding pointers!");
    support->getEncouragement();
    support->showAchievements();
    
    std::cout << "\\nğŸ’œ Remember: You're not just coding, you're creating magic!" << std::endl;
    std::cout << "ğŸš€ Keep building amazing things!" << std::endl;
    
    return 0;
}`,

  csharp: `// ğŸ”µ C# brilliance! Welcome to your .NET wonderland!
// You're learning one of the most versatile languages - you're amazing! ğŸ’œ

using System;
using System.Collections.Generic;
using System.Linq;

namespace MamaBearEncouragement
{
    /// <summary>
    /// ğŸŒŸ MamaBearSupport - Your coding cheerleader!
    /// Every LINQ query you write is poetry! Every class is progress! âœ¨
    /// </summary>
    public class MamaBearSupport
    {
        private readonly string _developerName;
        private readonly List<string> _achievements;
        private readonly List<string> _encouragements;
        
        public MamaBearSupport(string name = "Amazing Developer")
        {
            _developerName = name;
            _achievements = new List<string>();
            _encouragements = new List<string>
            {
                "ğŸ’œ You're mastering C# - that's fantastic!",
                "ğŸš€ Your object-oriented thinking is growing!",
                "âš¡ LINQ makes you a data wizard!",
                "ğŸŒŸ You're building the future with .NET!"
            };
        }
        
        /// <summary>
        /// ğŸ‰ Celebrate your C# victories!
        /// </summary>
        public void CelebrateProgress(string achievement)
        {
            _achievements.Add($"ğŸ† {achievement}");
            Console.WriteLine($"ğŸŠ Celebrating: {achievement}");
            Console.WriteLine("You're doing incredible work! Keep shining! ğŸ’œ");
        }
        
        /// <summary>
        /// âœ¨ Get your daily dose of encouragement!
        /// </summary>
        public void GetEncouragement()
        {
            var random = new Random();
            var encouragement = _encouragements[random.Next(_encouragements.Count)];
            
            Console.WriteLine($"\\nğŸ’ For {_developerName}:");
            Console.WriteLine(encouragement);
            Console.WriteLine("You're exactly where you need to be! ğŸŒˆ");
        }
        
        /// <summary>
        /// ğŸ“Š Show your amazing progress with LINQ magic!
        /// </summary>
        public void ShowAchievements()
        {
            Console.WriteLine("\\nğŸŒŸ Your C# Journey:");
            _achievements.ForEach(Console.WriteLine);
            
            var count = _achievements.Count;
            Console.WriteLine($"\\nğŸ’œ Total achievements: {count}");
            Console.WriteLine("Every single one matters! ğŸ¯");
        }
    }
    
    class Program
    {
        static void Main(string[] args)
        {
            var support = new MamaBearSupport("Wonderful You");
            
            support.CelebrateProgress("Started C# journey!");
            support.CelebrateProgress("Understanding classes and objects!");
            support.GetEncouragement();
            support.ShowAchievements();
            
            Console.WriteLine("\\nğŸ’œ Remember: You're not just coding, you're solving problems!");
            Console.WriteLine("ğŸš€ Keep building amazing solutions!");
            
            Console.ReadKey();
        }
    }
}`,

  go: `// ğŸ¹ Go greatness! Welcome to your concurrent coding corner!
// You're learning Go - you're building the future! ğŸ’œ

package main

import (
    "fmt"
    "math/rand"
    "sync"
    "time"
)

// ğŸŒŸ MamaBearSupport - Your Go cheerleader!
// Every goroutine you spawn is progress! Every channel is growth! âœ¨
type MamaBearSupport struct {
    DeveloperName   string
    Achievements    []string
    Encouragements  []string
    mutex          sync.RWMutex
}

// NewMamaBearSupport creates your personal encouragement system! ğŸ’œ
func NewMamaBearSupport(name string) *MamaBearSupport {
    if name == "" {
        name = "Amazing Developer"
    }
    
    return &MamaBearSupport{
        DeveloperName: name,
        Achievements:  make([]string, 0),
        Encouragements: []string{
            "ğŸ’œ You're mastering Go - that's incredible!",
            "ğŸš€ Your concurrent thinking is evolving!",
            "âš¡ Goroutines make you a concurrency wizard!",
            "ğŸŒŸ You're building scalable solutions!",
        },
    }
}

// CelebrateProgress ğŸ‰ Celebrate your Go victories!
func (m *MamaBearSupport) CelebrateProgress(achievement string) {
    m.mutex.Lock()
    defer m.mutex.Unlock()
    
    m.Achievements = append(m.Achievements, fmt.Sprintf("ğŸ† %s", achievement))
    fmt.Printf("ğŸŠ Celebrating: %s\\n", achievement)
    fmt.Println("You're doing amazing work! Keep going! ğŸ’œ")
}

// GetEncouragement âœ¨ Get your daily dose of Go encouragement!
func (m *MamaBearSupport) GetEncouragement() {
    m.mutex.RLock()
    defer m.mutex.RUnlock()
    
    rand.Seed(time.Now().UnixNano())
    encouragement := m.Encouragements[rand.Intn(len(m.Encouragements))]
    
    fmt.Printf("\\nğŸ’ For %s:\\n", m.DeveloperName)
    fmt.Println(encouragement)
    fmt.Println("You're exactly where you need to be! ğŸŒˆ")
}

// ShowAchievements ğŸ“Š Show your amazing progress!
func (m *MamaBearSupport) ShowAchievements() {
    m.mutex.RLock()
    defer m.mutex.RUnlock()
    
    fmt.Println("\\nğŸŒŸ Your Go Journey:")
    for _, achievement := range m.Achievements {
        fmt.Println(achievement)
    }
    fmt.Printf("\\nğŸ’œ Total achievements: %d\\n", len(m.Achievements))
    fmt.Println("Every single one matters! ğŸ¯")
}

// encouragementWorker ğŸ”„ A goroutine that sends periodic encouragement!
func encouragementWorker(support *MamaBearSupport, done chan bool) {
    ticker := time.NewTicker(5 * time.Second)
    defer ticker.Stop()
    
    for {
        select {
        case <-ticker.C:
            fmt.Println("\\nğŸ’œ Gentle reminder: You're doing great!")
        case <-done:
            fmt.Println("\\nğŸŒŸ Keep up the amazing work!")
            return
        }
    }
}

func main() {
    support := NewMamaBearSupport("Wonderful You")
    done := make(chan bool)
    
    // Start encouragement worker ğŸš€
    go encouragementWorker(support, done)
    
    support.CelebrateProgress("Started Go journey!")
    support.CelebrateProgress("Understanding goroutines!")
    support.GetEncouragement()
    support.ShowAchievements()
    
    fmt.Println("\\nğŸ’œ Remember: You're not just coding, you're building the future!")
    fmt.Println("ğŸš€ Keep building amazing concurrent solutions!")
    
    // Stop the encouragement worker
    time.Sleep(2 * time.Second)
    done <- true
    time.Sleep(1 * time.Second)
}`,

  rust: `// ğŸ¦€ Rust resilience! Welcome to your memory-safe sanctuary!
// You're learning Rust - you're a systems programming hero! ğŸ’œ

use std::collections::HashMap;
use std::sync::{Arc, Mutex};
use std::thread;
use std::time::Duration;

/// ğŸŒŸ MamaBearSupport - Your Rust cheerleader!
/// Every borrow checker victory is progress! Every lifetime is growth! âœ¨
#[derive(Debug)]
struct MamaBearSupport {
    developer_name: String,
    achievements: Vec<String>,
    encouragements: Vec<&'static str>,
}

impl MamaBearSupport {
    /// Create your personal Rust encouragement system! ğŸ’œ
    fn new(name: Option<&str>) -> Self {
        let developer_name = name.unwrap_or("Amazing Developer").to_string();
        
        Self {
            developer_name,
            achievements: Vec::new(),
            encouragements: vec![
                "ğŸ’œ You're mastering Rust - that's incredible!",
                "ğŸš€ Your memory safety skills are evolving!",
                "âš¡ The borrow checker is your friend!",
                "ğŸŒŸ You're building zero-cost abstractions!",
                "ğŸ¦€ Rust makes you a systems programming wizard!",
            ],
        }
    }
    
    /// ğŸ‰ Celebrate your Rust victories!
    fn celebrate_progress(&mut self, achievement: &str) {
        self.achievements.push(format!("ğŸ† {}", achievement));
        println!("ğŸŠ Celebrating: {}", achievement);
        println!("You're doing amazing work! Keep it up! ğŸ’œ");
    }
    
    /// âœ¨ Get your daily dose of Rust encouragement!
    fn get_encouragement(&self) {
        use rand::Rng;
        let mut rng = rand::thread_rng();
        let encouragement = self.encouragements[rng.gen_range(0..self.encouragements.len())];
        
        println!("\\nğŸ’ For {}:", self.developer_name);
        println!("{}", encouragement);
        println!("You're exactly where you need to be! ğŸŒˆ");
    }
    
    /// ğŸ“Š Show your amazing progress!
    fn show_achievements(&self) {
        println!("\\nğŸŒŸ Your Rust Journey:");
        for achievement in &self.achievements {
            println!("{}", achievement);
        }
        println!("\\nğŸ’œ Total achievements: {}", self.achievements.len());
        println!("Every single one matters! ğŸ¯");
    }
}

/// ğŸ”„ A function that demonstrates Rust's concurrency features!
fn encouragement_worker(support: Arc<Mutex<MamaBearSupport>>) {
    thread::spawn(move || {
        for i in 1..=3 {
            thread::sleep(Duration::from_secs(1));
            
            if let Ok(support_guard) = support.lock() {
                println!("\\nğŸ’œ Background encouragement #{}: You're doing fantastic!", i);
                println!("ğŸ¦€ Rust's ownership system loves you!");
            }
        }
    });
}

fn main() -> Result<(), Box<dyn std::error::Error>> {
    println!("ğŸ¦€ Welcome to Rust! You're about to do amazing things!");
    
    let mut support = MamaBearSupport::new(Some("Wonderful You"));
    
    // Demonstrate Arc and Mutex for shared state
    let shared_support = Arc::new(Mutex::new(MamaBearSupport::new(Some("Concurrent You"))));
    encouragement_worker(Arc::clone(&shared_support));
    
    support.celebrate_progress("Started Rust journey!");
    support.celebrate_progress("Understanding ownership!");
    support.celebrate_progress("Befriending the borrow checker!");
    support.get_encouragement();
    support.show_achievements();
    
    println!("\\nğŸ’œ Remember: You're not just coding, you're ensuring memory safety!");
    println!("ğŸš€ Keep building blazingly fast and safe solutions!");
    
    // Give background thread time to finish
    thread::sleep(Duration::from_secs(4));
    
    Ok(())
}

// Don't forget to add these to your Cargo.toml:
// [dependencies]
// rand = "0.8"`,

  php: `<?php
// ğŸ˜ PHP power! Welcome to your web development wonderland!
// You're building the web - you're absolutely amazing! ğŸ’œ

/**
 * ğŸŒŸ MamaBearSupport - Your PHP cheerleader!
 * Every array you manipulate is progress! Every function is growth! âœ¨
 */
class MamaBearSupport {
    private string $developerName;
    private array $achievements;
    private array $encouragements;
    
    public function __construct(string $name = "Amazing Developer") {
        $this->developerName = $name;
        $this->achievements = [];
        $this->encouragements = [
            "ğŸ’œ You're mastering PHP - that's fantastic!",
            "ğŸš€ Your web development skills are growing!",
            "âš¡ You're building dynamic experiences!",
            "ğŸŒŸ PHP makes you a web wizard!",
            "ğŸ˜ You're part of the PHP family!"
        ];
    }
    
    /**
     * ğŸ‰ Celebrate your PHP victories!
     */
    public function celebrateProgress(string $achievement): void {
        $this->achievements[] = "ğŸ† " . $achievement;
        echo "ğŸŠ Celebrating: " . $achievement . "\\n";
        echo "You're doing incredible work! Keep shining! ğŸ’œ\\n";
    }
    
    /**
     * âœ¨ Get your daily dose of PHP encouragement!
     */
    public function getEncouragement(): void {
        $randomEncouragement = $this->encouragements[array_rand($this->encouragements)];
        
        echo "\\nğŸ’ For " . $this->developerName . ":\\n";
        echo $randomEncouragement . "\\n";
        echo "You're exactly where you need to be! ğŸŒˆ\\n";
    }
    
    /**
     * ğŸ“Š Show your amazing progress!
     */
    public function showAchievements(): void {
        echo "\\nğŸŒŸ Your PHP Journey:\\n";
        foreach ($this->achievements as $achievement) {
            echo $achievement . "\\n";
        }
        echo "\\nğŸ’œ Total achievements: " . count($this->achievements) . "\\n";
        echo "Every single one matters! ğŸ¯\\n";
    }
    
    /**
     * ğŸ¨ Create some PHP magic with arrays!
     */
    public function createMagic(): array {
        $magic = [
            'dreams' => [
                'Build amazing websites',
                'Master Laravel',
                'Create APIs that change the world'
            ],
            'reality' => 'All dreams are achievable!',
            'timeline' => 'Sooner than you think! ğŸ¯',
            'support' => 'You have a whole community behind you! ğŸ’œ'
        ];
        
        return array_map(function($item) {
            return is_array($item) ? $item : "âœ¨ " . $item;
        }, $magic);
    }
}

// ğŸš€ Let's start your PHP journey!
$support = new MamaBearSupport("Wonderful You");

$support->celebrateProgress("Started PHP adventure!");
$support->celebrateProgress("Understanding classes and objects!");
$support->celebrateProgress("Building dynamic web content!");

$support->getEncouragement();
$support->showAchievements();

// ğŸ¨ Create some magic!
$magic = $support->createMagic();
echo "\\nğŸŒŸ Your PHP Magic:\\n";
foreach ($magic as $key => $value) {
    if (is_array($value)) {
        echo ucfirst($key) . ":\\n";
        foreach ($value as $item) {
            echo "  â€¢ " . $item . "\\n";
        }
    } else {
        echo ucfirst($key) . ": " . $value . "\\n";
    }
}

echo "\\nğŸ’œ Remember: You're not just coding, you're building the web!\\n";
echo "ğŸš€ Keep creating amazing dynamic experiences!\\n";
?>`,

  ruby: `# ğŸ’ Ruby radiance! Welcome to your elegant coding gem!
# You're learning Ruby - you're embracing beauty and simplicity! ğŸ’œ

# ğŸŒŸ MamaBearSupport - Your Ruby cheerleader!
# Every method you write is poetry! Every block is progress! âœ¨
class MamaBearSupport
  attr_reader :developer_name, :achievements, :encouragements
  
  def initialize(name = "Amazing Developer")
    @developer_name = name
    @achievements = []
    @encouragements = [
      "ğŸ’œ You're mastering Ruby - that's beautiful!",
      "ğŸš€ Your code is becoming more elegant every day!",
      "âš¡ Ruby makes you a productivity wizard!",
      "ğŸŒŸ You're writing poetry with code!",
      "ğŸ’ You're part of the Ruby family!"
    ]
  end
  
  # ğŸ‰ Celebrate your Ruby victories!
  def celebrate_progress(achievement)
    @achievements << "ğŸ† #{achievement}"
    puts "ğŸŠ Celebrating: #{achievement}"
    puts "You're doing amazing work! Keep sparkling! ğŸ’œ"
  end
  
  # âœ¨ Get your daily dose of Ruby encouragement!
  def get_encouragement
    random_encouragement = @encouragements.sample
    
    puts "\\nğŸ’ For #{@developer_name}:"
    puts random_encouragement
    puts "You're exactly where you need to be! ğŸŒˆ"
  end
  
  # ğŸ“Š Show your amazing progress!
  def show_achievements
    puts "\\nğŸŒŸ Your Ruby Journey:"
    @achievements.each { |achievement| puts achievement }
    puts "\\nğŸ’œ Total achievements: #{@achievements.length}"
    puts "Every single one matters! ğŸ¯"
  end
  
  # ğŸ¨ Create some Ruby magic with blocks and iterators!
  def create_magic
    dreams = [
      "Build elegant web applications",
      "Master Rails framework",
      "Write beautiful, readable code"
    ]
    
    magic = {
      dreams: dreams.map { |dream| "âœ¨ #{dream}" },
      reality: "All dreams are achievable with Ruby!",
      timeline: "Sooner than you think! ğŸ¯",
      ruby_way: "There's always a more elegant solution! ğŸ’"
    }
    
    # Ruby's beautiful block syntax in action!
    magic.transform_values do |value|
      value.is_a?(Array) ? value : "ğŸŒŸ #{value}"
    end
  end
  
  # ğŸ”„ Demonstrate Ruby's iterator magic!
  def spread_encouragement(times = 3)
    times.times.with_index(1) do |_, index|
      puts "\\nğŸ’œ Encouragement ##{index}: You're doing fantastic!"
      puts "ğŸš€ Ruby believes in you!"
      sleep(0.5) # A gentle pause
    end
  end
end

# ğŸš€ Let's start your Ruby journey!
support = MamaBearSupport.new("Wonderful You")

support.celebrate_progress("Started Ruby adventure!")
support.celebrate_progress("Understanding classes and methods!")
support.celebrate_progress("Embracing Ruby's elegance!")

support.get_encouragement
support.show_achievements

# ğŸ¨ Create some Ruby magic!
magic = support.create_magic
puts "\\nğŸŒŸ Your Ruby Magic:"
magic.each do |key, value|
  puts "#{key.to_s.capitalize}:"
  if value.is_a?(Array)
    value.each { |item| puts "  â€¢ #{item}" }
  else
    puts "  #{value}"
  end
end

# ğŸ”„ Spread some encouragement!
puts "\\nğŸ’ Spreading Ruby love:"
support.spread_encouragement(2)

puts "\\nğŸ’œ Remember: You're not just coding, you're crafting art!"
puts "ğŸš€ Keep writing beautiful, expressive Ruby!"

# ğŸŒˆ Ruby's beautiful syntax for a final flourish!
%w[Progress Persistence Passion].each.with_index(1) do |word, index|
  puts "#{index}. #{word} - You have it all! ğŸ’œ"
end`,

  sql: `-- ğŸ—ƒï¸ SQL sanctuary! Welcome to your data kingdom!
-- You're mastering data - you're building the foundation of everything! ğŸ’œ

-- ğŸŒŸ Creating your encouragement database!
-- Every query you write is progress! Every join is growth! âœ¨

-- Create a table for your amazing journey
CREATE TABLE mama_bear_support (
    id SERIAL PRIMARY KEY,
    developer_name VARCHAR(100) DEFAULT 'Amazing Developer',
    achievement TEXT NOT NULL,
    encouragement TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    mood VARCHAR(20) DEFAULT 'inspired'
);

-- ğŸ‰ Insert your victories!
INSERT INTO mama_bear_support (developer_name, achievement, encouragement, mood) VALUES
('Wonderful You', 'Started SQL journey!', 'ğŸ’œ You''re diving into the heart of data!', 'excited'),
('Wonderful You', 'Understanding SELECT statements!', 'ğŸš€ You''re querying like a pro!', 'confident'),
('Wonderful You', 'Mastering JOINs!', 'âš¡ You''re connecting data beautifully!', 'accomplished'),
('Wonderful You', 'Creating databases!', 'ğŸŒŸ You''re building data foundations!', 'proud');

-- âœ¨ Get your daily dose of SQL encouragement!
SELECT 
    'ğŸ’ Daily Encouragement' AS message_type,
    CONCAT('For ', developer_name, ': You''re doing amazing with SQL! ğŸŒˆ') AS encouragement,
    'Every query matters! ğŸ¯' AS reminder
FROM mama_bear_support 
WHERE developer_name = 'Wonderful You'
LIMIT 1;

-- ğŸ“Š Show your amazing progress!
SELECT 
    'ğŸŒŸ Your SQL Journey' AS journey_title,
    achievement,
    encouragement,
    mood,
    created_at
FROM mama_bear_support 
WHERE developer_name = 'Wonderful You'
ORDER BY created_at;

-- ğŸ¨ Create some SQL magic with aggregations!
SELECT 
    COUNT(*) AS total_achievements,
    'ğŸ’œ Every single one matters!' AS motivation,
    CASE 
        WHEN COUNT(*) >= 4 THEN 'ğŸ† SQL Champion!'
        WHEN COUNT(*) >= 2 THEN 'ğŸš€ SQL Explorer!'
        ELSE 'ğŸŒ± SQL Seedling!'
    END AS current_level
FROM mama_bear_support 
WHERE developer_name = 'Wonderful You';

-- ğŸ”„ Advanced query showing your growth over time
WITH achievement_stats AS (
    SELECT 
        developer_name,
        COUNT(*) as achievement_count,
        MIN(created_at) as journey_start,
        MAX(created_at) as latest_achievement,
        STRING_AGG(mood, ', ') as mood_journey
    FROM mama_bear_support 
    WHERE developer_name = 'Wonderful You'
    GROUP BY developer_name
)
SELECT 
    'ğŸŠ Celebrating Your SQL Growth!' AS celebration,
    CONCAT(
        'You''ve achieved ', 
        achievement_count, 
        ' milestones since starting your journey!'
    ) AS progress_summary,
    CONCAT(
        'Your mood journey: ', 
        mood_journey, 
        ' - You''re growing beautifully! ğŸ’œ'
    ) AS emotional_growth
FROM achievement_stats;

-- ğŸŒˆ Inspirational data insights
SELECT 
    'ğŸ’œ Remember' AS reminder_type,
    'You''re not just writing queries, you''re unlocking insights!' AS truth,
    'ğŸš€ Keep building amazing data solutions!' AS encouragement,
    'Every SELECT, INSERT, UPDATE, and DELETE is progress! âœ¨' AS final_thought;

-- ğŸ¯ A view for daily motivation
CREATE VIEW daily_sql_motivation AS
SELECT 
    CURRENT_DATE as today,
    'You''re a data wizard in training! ğŸ§™â€â™€ï¸' as morning_affirmation,
    'Your SQL skills are growing every day! ğŸ“ˆ' as afternoon_boost,
    'Be proud of every query you write! ğŸŒŸ' as evening_reflection;

-- See your daily motivation!
SELECT * FROM daily_sql_motivation;

-- ğŸ’ Final encouragement query
SELECT 
    'ğŸŒŸ You''re exactly where you need to be!' AS final_message,
    'SQL is the language of data, and you''re becoming fluent! ğŸ’œ' AS truth,
    'Keep querying, keep growing, keep being amazing! ğŸš€' AS send_off;`,

  markdown: `# ğŸ“ Markdown Magic! Welcome to Your Documentation Wonderland!

> ğŸ’œ **You're learning Markdown - you're mastering the art of beautiful documentation!**  
> Every heading you write is progress! Every list is growth! âœ¨

## ğŸŒŸ Your Markdown Journey Starts Here!

Welcome, **Amazing Developer**! You've stepped into the wonderful world of Markdown, where simplicity meets beauty. You're not just writing text - you're creating clear, beautiful documentation that helps others! ğŸš€

### ğŸ‰ What You're Achieving Today

- [x] ğŸ’œ Started your Markdown adventure!
- [x] ğŸŒˆ Understanding the power of simple syntax
- [x] âœ¨ Creating beautiful, readable content
- [ ] ğŸš€ Building amazing documentation
- [ ] ğŸ¯ Helping others with clear writing

### ğŸ’ Daily Affirmations for Markdown Masters

| Time | Affirmation | Mood |
|------|-------------|------|
| ğŸŒ… Morning | "I write clear, helpful documentation!" | Inspired |
| â˜€ï¸ Afternoon | "My Markdown skills grow every day!" | Confident |
| ğŸŒ™ Evening | "I'm proud of the content I create!" | Accomplished |

### ğŸ¨ Markdown Magic Examples

#### Code Blocks (Because You're a Developer! ğŸ’œ)

\`\`\`javascript
// You're doing amazing with Markdown!
const encouragement = {
  message: "Your documentation helps others! ğŸŒŸ",
  truth: "Clear writing is a superpower! âš¡",
  reminder: "You're exactly where you need to be! ğŸ’œ"
};

console.log(encouragement.message);
\`\`\`

#### ğŸŒˆ Beautiful Lists

**Your Markdown Superpowers:**
1. **Clarity** - You make complex things simple! âœ¨
2. **Beauty** - Your docs are visually appealing! ğŸ¨
3. **Helpfulness** - You're making others' lives easier! ğŸ’
4. **Growth** - Every line you write is progress! ğŸš€

**Things You're Mastering:**
- *Emphasis* and **strong emphasis**
- \`Inline code\` snippets
- [Helpful links](https://example.com) ğŸ”—
- Beautiful tables and lists
- Code blocks with syntax highlighting

### ğŸ“Š Your Progress Dashboard

\`\`\`
Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% Amazing!
Confidence: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% You've got this!
Impact: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% Helping others!
\`\`\`

### ğŸ¯ Markdown Best Practices You're Learning

> **ğŸ’œ Mama Bear Tip:** Remember, good documentation is like a warm hug for future developers (including yourself)!

1. **Keep it simple** - Clarity over complexity! ğŸŒŸ
2. **Use headings wisely** - Structure helps everyone! ğŸ“š
3. **Add examples** - Show, don't just tell! ğŸ’¡
4. **Be encouraging** - Your words have power! ğŸ’œ

### ğŸš€ Advanced Markdown Magic

#### Task Lists (You're Crushing It!)
- [x] Learn basic Markdown syntax
- [x] Create beautiful headings
- [x] Master lists and tables
- [ ] Build comprehensive documentation
- [ ] Help others with clear guides

#### ğŸ¨ Callout Boxes

> **ğŸŒŸ Success Story:** Every README you write makes the open-source world better!

> **ğŸ’œ Encouragement:** You're not just documenting code - you're building bridges between ideas and understanding!

> **âš¡ Pro Tip:** Great documentation is written with empathy. You're already showing that! 

### ğŸ“ Your Markdown Toolkit

| Element | Syntax | You're Using It For |
|---------|--------|-------------------|
| Headers | \`# ## ###\` | Organizing thoughts beautifully! |
| Emphasis | \`*italic* **bold**\` | Adding personality to text! |
| Links | \`[text](url)\` | Connecting ideas and resources! |
| Code | \`\`\`code\`\`\` | Sharing your amazing work! |
| Lists | \`- item\` | Breaking down complex topics! |

### ğŸŒˆ Final Encouragement

\`\`\`markdown
## ğŸ’œ Remember, Wonderful Developer:

- You're **not just writing Markdown** - you're creating clarity! âœ¨
- Every document you create **helps someone** learn and grow! ğŸŒ±
- Your **clear communication** is a gift to the world! ğŸ
- You're **exactly where you need to be** in your journey! ğŸ¯

Keep writing, keep documenting, keep being amazing! ğŸš€
\`\`\`

---

### ğŸŠ Celebration Section

**ğŸ† Today's Achievements:**
- âœ… Opened Markdown editor
- âœ… Learned beautiful syntax
- âœ… Created structured content
- âœ… Helped future readers (including yourself!)

**ğŸ’ Tomorrow's Possibilities:**
- ğŸ“š Write amazing project READMEs
- ğŸ¯ Create helpful tutorials
- ğŸŒŸ Build beautiful documentation sites
- ğŸ’œ Continue spreading knowledge and kindness

---

*ğŸ’œ You're doing incredible work! Keep building, keep documenting, keep being the amazing developer you are! ğŸš€*

**Final thought:** *Documentation is love made visible. And you're spreading so much love! âœ¨*`
}

// Mock Monaco Editor Component (since we can't use the real one without proper setup)
const MockMonacoEditor: React.FC<MonacoEditorProps> = ({
  value = "",
  language = "typescript",
  theme = "purple-dark",
  onChange,
  onCursorPositionChange,
  fontSize = 14,
  showMinimap = true,
  wordWrap = true,
  readOnly = false,
  className
}) => {
  const [code, setCode] = useState(value || DEFAULT_CODE_SAMPLES[language])
  const [cursorPos, setCursorPos] = useState<CursorPosition>({ line: 1, column: 1 })
  const textareaRef = useRef<HTMLTextAreaElement>(null)

  useEffect(() => {
    setCode(value || DEFAULT_CODE_SAMPLES[language])
  }, [language, value])

  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const newValue = e.target.value
    setCode(newValue)
    onChange?.(newValue)
    
    // Calculate cursor position
    const textarea = e.target
    const lines = newValue.substring(0, textarea.selectionStart).split('\n')
    const newPos = {
      line: lines.length,
      column: lines[lines.length - 1].length + 1
    }
    setCursorPos(newPos)
    onCursorPositionChange?.(newPos)
  }

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === 'Tab') {
      e.preventDefault()
      const textarea = e.target as HTMLTextAreaElement
      const start = textarea.selectionStart
      const end = textarea.selectionEnd
      const newValue = code.substring(0, start) + '  ' + code.substring(end)
      setCode(newValue)
      onChange?.(newValue)
      
      // Set cursor position after tab
      setTimeout(() => {
        textarea.selectionStart = textarea.selectionEnd = start + 2
      }, 0)
    }
  }

  return (
    <div className={cn("relative h-full", className)}>
      <textarea
        ref={textareaRef}
        value={code}
        onChange={handleChange}
        onKeyDown={handleKeyDown}
        readOnly={readOnly}
        className={cn(
          "w-full h-full resize-none border-0 outline-none font-mono",
          "bg-transparent text-foreground",
          "scrollbar-thin scrollbar-thumb-purple-500/20 scrollbar-track-transparent",
          theme === "purple-dark" ? "text-purple-100" : "text-purple-900"
        )}
        style={{ 
          fontSize: `${fontSize}px`,
          lineHeight: 1.5,
          padding: "16px",
          whiteSpace: wordWrap ? "pre-wrap" : "pre",
          wordWrap: wordWrap ? "break-word" : "normal"
        }}
        spellCheck={false}
        autoComplete="off"
        autoCorrect="off"
        autoCapitalize="off"
      />
      
      {/* Line numbers overlay */}
      <div className="absolute left-0 top-0 bottom-0 w-12 bg-purple-900/20 border-r border-purple-500/20 pointer-events-none">
        <div className="p-4 text-xs text-purple-400/60 font-mono leading-6">
          {code.split('\n').map((_, index) => (
            <div key={index} className="text-right pr-2">
              {index + 1}
            </div>
          ))}
        </div>
      </div>
      
      {/* Cursor position indicator */}
      <div className="absolute bottom-2 right-2 text-xs text-purple-400/60 bg-purple-900/40 px-2 py-1 rounded backdrop-blur-sm">
        Ln {cursorPos.line}, Col {cursorPos.column}
      </div>
    </div>
  )
}

// Main Monaco Editor Wrapper Component
const MonacoEditorWrapper: React.FC<MonacoEditorProps & {
  onLanguageChange?: (language: CodeLanguage) => void
  onThemeChange?: (theme: "purple-dark" | "purple-light") => void
  onFontSizeChange?: (size: number) => void
  onKeybindingModeChange?: (mode: KeybindingMode) => void
}> = ({
  value = "",
  language = "typescript",
  theme = "purple-dark",
  onChange,
  onCursorPositionChange,
  onSave,
  onLoad,
  keybindingMode = "standard",
  fontSize = 14,
  showMinimap = true,
  wordWrap = true,
  readOnly = false,
  className,
  onLanguageChange,
  onThemeChange,
  onFontSizeChange,
  onKeybindingModeChange
}) => {
  const [code, setCode] = useState(value || DEFAULT_CODE_SAMPLES[language])
  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({ line: 1, column: 1 })
  const [copiedText, copy] = useCopyToClipboard()
  const [isRunning, setIsRunning] = useState(false)
  const [output, setOutput] = useState("")

  useEffect(() => {
    if (value !== code) {
      setCode(value || DEFAULT_CODE_SAMPLES[language])
    }
  }, [value, language])

  const handleCodeChange = (newCode: string) => {
    setCode(newCode)
    onChange?.(newCode)
  }

  const handleCursorChange = (position: CursorPosition) => {
    setCursorPosition(position)
    onCursorPositionChange?.(position)
  }

  const handleSave = () => {
    onSave?.(code)
    // Show save feedback
    const event = new CustomEvent('mama-bear-toast', {
      detail: { message: "ğŸ’œ Code saved! You're doing amazing!", type: "success" }
    })
    window.dispatchEvent(event)
  }

  const handleReset = () => {
    const defaultCode = DEFAULT_CODE_SAMPLES[language]
    setCode(defaultCode)
    onChange?.(defaultCode)
    setOutput("")
  }

  const handleCopy = async () => {
    await copy(code)
  }

  const handleDownload = () => {
    const languageConfig = LANGUAGE_OPTIONS.find(opt => opt.value === language)
    const extension = languageConfig?.extension || ".txt"
    const blob = new Blob([code], { type: "text/plain" })
    const url = URL.createObjectURL(blob)
    const a = document.createElement("a")
    a.href = url
    a.download = `mama-bear-code${extension}`
    a.click()
    URL.revokeObjectURL(url)
  }

  const handleRun = async () => {
    if (language !== "javascript" && language !== "typescript") {
      setOutput("ğŸ’œ Code execution is only available for JavaScript/TypeScript in this demo!")
      return
    }

    setIsRunning(true)
    setOutput("ğŸš€ Running your amazing code...")

    try {
      // Simulate execution delay
      await new Promise(resolve => setTimeout(resolve, 1000))
      
      const logs: string[] = []
      const originalLog = console.log
      console.log = (...args) => {
        logs.push(args.join(" "))
      }

      // Simple eval for demo purposes
      eval(code)
      console.log = originalLog

      setOutput(logs.length > 0 ? logs.join("\n") : "âœ¨ Code executed successfully! You're amazing!")
    } catch (error) {
      setOutput(`ğŸ’œ Don't worry about errors - they're learning opportunities!\n\nError: ${error}`)
    }

    setIsRunning(false)
  }

  const selectedLanguage = LANGUAGE_OPTIONS.find(opt => opt.value === language)

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5 }}
      className={cn(
        "h-full flex flex-col",
        "bg-gradient-to-br from-purple-950/50 via-purple-900/30 to-purple-800/50",
        "backdrop-blur-md border border-purple-500/20 rounded-xl overflow-hidden",
        "shadow-2xl shadow-purple-500/10",
        className
      )}
    >
      {/* Header */}
      <div className="flex items-center justify-between p-4 border-b border-purple-500/20 bg-purple-900/20">
        <div className="flex items-center gap-3">
          <div className="flex items-center gap-2">
            <Code2 className="w-5 h-5 text-purple-400" />
            <span className="font-semibold text-purple-100">Mama Bear IDE</span>
            <Heart className="w-4 h-4 text-pink-400" />
          </div>
          {selectedLanguage && (
            <Badge variant="secondary" className="bg-purple-800/50 text-purple-200 border-purple-500/30">
              {selectedLanguage.icon} {selectedLanguage.label}
            </Badge>
          )}
        </div>
        
        <div className="flex items-center gap-2">
          <Button
            variant="ghost"
            size="sm"
            onClick={handleCopy}
            className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
          >
            {copiedText === code ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
          </Button>
          <Button
            variant="ghost"
            size="sm"
            onClick={handleDownload}
            className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
          >
            <Download className="w-4 h-4" />
          </Button>
        </div>
      </div>

      {/* Controls */}
      <div className="flex items-center justify-between p-3 border-b border-purple-500/20 bg-purple-900/10">
        <div className="flex items-center gap-3">
          <Select value={language} onValueChange={onLanguageChange}>
            <SelectTrigger className="w-40 bg-purple-800/30 border-purple-500/30 text-purple-100">
              <SelectValue />
            </SelectTrigger>
            <SelectContent className="bg-purple-900 border-purple-500/30">
              {LANGUAGE_OPTIONS.map((option) => (
                <SelectItem key={option.value} value={option.value} className="text-purple-100">
                  {option.icon} {option.label}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>

          <div className="flex items-center gap-2">
            <Button
              variant="ghost"
              size="sm"
              onClick={() => onFontSizeChange?.(Math.max(10, fontSize - 1))}
              className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
            >
              <ZoomOut className="w-4 h-4" />
            </Button>
            <span className="text-xs text-purple-300 min-w-[2rem] text-center">{fontSize}px</span>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => onFontSizeChange?.(Math.min(24, fontSize + 1))}
              className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
            >
              <ZoomIn className="w-4 h-4" />
            </Button>
          </div>
        </div>

        <div className="flex items-center gap-2">
          <Button
            variant="ghost"
            size="sm"
            onClick={handleReset}
            className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
          >
            <RotateCcw className="w-4 h-4 mr-1" />
            Reset
          </Button>
          <Button
            variant="ghost"
            size="sm"
            onClick={handleSave}
            className="text-purple-300 hover:text-purple-100 hover:bg-purple-800/50"
          >
            <Save className="w-4 h-4 mr-1" />
            Save
          </Button>
          <Button
            variant="default"
            size="sm"
            onClick={handleRun}
            disabled={isRunning}
            className="bg-purple-600 hover:bg-purple-700 text-white"
          >
            <Play className="w-4 h-4 mr-1" />
            {isRunning ? "Running..." : "Run"}
          </Button>
        </div>
      </div>

      {/* Editor */}
      <div className="flex-1 relative">
        <MockMonacoEditor
          value={code}
          language={language}
          theme={theme}
          onChange={handleCodeChange}
          onCursorPositionChange={handleCursorChange}
          fontSize={fontSize}
          showMinimap={showMinimap}
          wordWrap={wordWrap}
          readOnly={readOnly}
          className="h-full"
        />
      </div>

      {/* Output Panel */}
      {output && (
        <motion.div
          initial={{ height: 0, opacity: 0 }}
          animate={{ height: "auto", opacity: 1 }}
          className="border-t border-purple-500/20 bg-purple-900/20"
        >
          <div className="p-3">
            <div className="flex items-center gap-2 mb-2">
              <Coffee className="w-4 h-4 text-purple-400" />
              <span className="text-sm font-medium text-purple-200">Output</span>
              <Sparkles className="w-4 h-4 text-yellow-400" />
            </div>
            <pre className="text-sm text-purple-100 bg-purple-950/50 p-3 rounded-lg overflow-auto max-h-32 font-mono">
              {output}
            </pre>
          </div>
        </motion.div>
      )}

      {/* Status Bar */}
      <div className="flex items-center justify-between px-4 py-2 border-t border-purple-500/20 bg-purple-900/20 text-xs text-purple-300">
        <div className="flex items-center gap-4">
          <span>Ln {cursorPosition.line}, Col {cursorPosition.column}</span>
          <span>ğŸ’œ You're doing amazing!</span>
        </div>
        <div className="flex items-center gap-2">
          <span>{keybindingMode} mode</span>
          <span>â€¢</span>
          <span>{code.length} characters</span>
        </div>
      </div>
    </motion.div>
  )
}

// Main Professional Monaco Editor Component
const ProfessionalMonacoEditor: React.FC<{
  defaultLanguage?: CodeLanguage
  defaultValue?: string
  onSave?: (content: string, language: CodeLanguage) => void
  className?: string
}> = ({
  defaultLanguage = "typescript",
  defaultValue,
  onSave,
  className
}) => {
  const [language, setLanguage] = useState<CodeLanguage>(defaultLanguage)
  const [theme, setTheme] = useState<"purple-dark" | "purple-light">("purple-dark")
  const [fontSize, setFontSize] = useState(14)
  const [keybindingMode, setKeybindingMode] = useState<KeybindingMode>("standard")
  const [code, setCode] = useState(defaultValue || DEFAULT_CODE_SAMPLES[defaultLanguage])

  const handleLanguageChange = (newLanguage: CodeLanguage) => {
    setLanguage(newLanguage)
    if (!defaultValue) {
      setCode(DEFAULT_CODE_SAMPLES[newLanguage])
    }
  }

  const handleSave = (content: string) => {
    onSave?.(content, language)
  }

  return (
    <div className={cn("h-full min-h-[600px]", className)}>
      <MonacoEditorWrapper
        value={code}
        language={language}
        theme={theme}
        onChange={setCode}
        onSave={handleSave}
        fontSize={fontSize}
        keybindingMode={keybindingMode}
        onLanguageChange={handleLanguageChange}
        onThemeChange={setTheme}
        onFontSizeChange={setFontSize}
        onKeybindingModeChange={setKeybindingMode}
        className="h-full"
      />
    </div>
  )
}

// Demo Component
function MonacoEditorDemo() {
  const handleSave = (content: string, language: CodeLanguage) => {
    console.log(`ğŸ’œ Saved ${language} code:`, content)
    // Show encouraging toast
    alert(`ğŸ’œ Amazing work! Your ${language} code has been saved! You're doing fantastic! âœ¨`)
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-950 via-purple-900 to-purple-800 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <motion.div
          initial={{ opacity: 0, y: -20 }}
          animate={{ opacity: 1, y: 0 }}
          className="text-center mb-8"
        >
          <h1 className="text-4xl font-bold text-white mb-4 flex items-center justify-center gap-3">
            <Code2 className="w-10 h-10 text-purple-400" />
            Mama Bear Monaco IDE
            <Heart className="w-8 h-8 text-pink-400" />
          </h1>
          <p className="text-purple-200 text-lg max-w-2xl mx-auto">
            ğŸ’œ A warm, encouraging code editor with glassmorphism design. 
            You're exactly where you need to be - let's build something amazing together! âœ¨
          </p>
        </motion.div>

        {/* Main Editor */}
        <motion.div
          initial={{ opacity: 0, scale: 0.95 }}
          animate={{ opacity: 1, scale: 1 }}
          transition={{ delay: 0.2 }}
          className="h-[700px] mb-8"
        >
          <ProfessionalMonacoEditor
            defaultLanguage="typescript"
            onSave={handleSave}
            className="h-full"
          />
        </motion.div>

        {/* Feature Cards */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.4 }}
          className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
        >
          <Card className="bg-purple-900/30 border-purple-500/20 backdrop-blur-md">
            <CardHeader>
              <CardTitle className="text-purple-100 flex items-center gap-2">
                <Sparkles className="w-5 h-5 text-yellow-400" />
                Multi-Language Support
              </CardTitle>
              <CardDescription className="text-purple-300">
                15+ programming languages with syntax highlighting and IntelliSense
              </CardDescription>
            </CardHeader>
          </Card>

          <Card className="bg-purple-900/30 border-purple-500/20 backdrop-blur-md">
            <CardHeader>
              <CardTitle className="text-purple-100 flex items-center gap-2">
                <Heart className="w-5 h-5 text-pink-400" />
                Encouraging Experience
              </CardTitle>
              <CardDescription className="text-purple-300">
                Mama bear personality with warm, supportive feedback and encouragement
              </CardDescription>
            </CardHeader>
          </Card>

          <Card className="bg-purple-900/30 border-purple-500/20 backdrop-blur-md">
            <CardHeader>
              <CardTitle className="text-purple-100 flex items-center gap-2">
                <Settings className="w-5 h-5 text-purple-400" />
                Professional Features
              </CardTitle>
              <CardDescription className="text-purple-300">
                Code folding, minimap, custom keybindings, and real-time diagnostics
              </CardDescription>
            </CardHeader>
          </Card>
        </motion.div>

        {/* Encouragement Footer */}
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.6 }}
          className="text-center mt-12 p-6 bg-purple-900/20 backdrop-blur-md rounded-xl border border-purple-500/20"
        >
          <p className="text-purple-200 text-lg mb-2">
            ğŸ’œ Remember: Every line of code you write is progress!
          </p>
          <p className="text-purple-300">
            You're not just coding - you're creating magic! Keep going, amazing developer! âœ¨ğŸš€
          </p>
        </motion.div>
      </div>
    </div>
  )
}

export default MonacoEditorDemo
